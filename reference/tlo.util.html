

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>tlo.util module &mdash; TLOmodel 0.1.dev2543+gad00864.d20250801 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=34bb78ad" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/theme_overrides.css?v=6ea10ece" />

  
    <link rel="shortcut icon" href="../_static/favicon.png"/>
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=9c477e70"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="tlo.methods.cervical_cancer module" href="tlo.methods.cervical_cancer.html" />
    <link rel="prev" title="tlo.simulation module" href="tlo.simulation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            TLOmodel
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Welcome</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aims.html">Aims &amp; Objectives</a></li>
<li class="toctree-l1"><a class="reference internal" href="../writeups.html">Model Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data_sources.html">Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../azure_batch.html">Using Azure Batch</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resources/index.html">Resource files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parameters.html">Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../learning.html">Learning Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../case-studies/index.html">Case studies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../videos.html">HEPU Videos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../publications.html">Publications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributors.html">Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">TLOmodel</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Reference</a></li>
          <li class="breadcrumb-item"><a href="tlo.html">tlo package</a></li>
      <li class="breadcrumb-item active">tlo.util module</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/reference/tlo.util.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-tlo.util">
<span id="tlo-util-module"></span><h1>tlo.util module<a class="headerlink" href="#module-tlo.util" title="Link to this heading"></a></h1>
<p>This file contains helpful utility functions.</p>
<dl class="py function">
<dt class="sig sig-object py" id="tlo.util.create_age_range_lookup">
<span class="sig-name descname"><span class="pre">create_age_range_lookup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">min_age:</span> <span class="pre">int,</span> <span class="pre">max_age:</span> <span class="pre">int,</span> <span class="pre">range_size:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">5)</span> <span class="pre">-&gt;</span> <span class="pre">(&lt;class</span> <span class="pre">'list'&gt;,</span> <span class="pre">typing.Dict[int,</span> <span class="pre">str]</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tlo.util.create_age_range_lookup" title="Link to this definition"></a></dt>
<dd><p>Create age-range categories and a dictionary that will map all whole years to age-range categories</p>
<p>If the minimum age is not zero then a below minimum age category will be made,
then age ranges until maximum age will be made by the range size,
all other ages will map to the greater than maximum age category.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>min_age</strong> – Minimum age for categories,</p></li>
<li><p><strong>max_age</strong> – Maximum age for categories, a greater than maximum age category will be made</p></li>
<li><p><strong>range_size</strong> – Size of each category between minimum and maximum ages</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>age_categories: ordered list of age categories available
lookup: Default dict of integers to maximum age mapping to the age categories</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tlo.util.transition_states">
<span class="sig-name descname"><span class="pre">transition_states</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">initial_series</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prob_matrix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rng</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">RandomState</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Series</span></span></span><a class="headerlink" href="#tlo.util.transition_states" title="Link to this definition"></a></dt>
<dd><p>Transition a series of states based on probability matrix</p>
<p>This should carry out all state transitions for a Series (i.e. column in DataFrame)
based on the probability of state-transition matrix.</p>
<p>Timing values for 1M rows per state, 4 states, 100 times:
- Looping through groups: [59.5, 58.7, 59.5]
- Using apply: [84.2, 83.3, 84.4]
Because of this, looping through the groups was chosen</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>initial_series</strong> (<em>Series</em>) – the initial state series</p></li>
<li><p><strong>prob_matrix</strong> (<em>DataFrame</em>) – DataFrame of state-transition probabilities
columns are the original state, rows are the new state. values are the probabilities</p></li>
<li><p><strong>rng</strong> (<em>RandomState</em>) – RandomState from the disease module</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Series with states changed according to probabilities</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tlo.util.sample_outcome">
<span class="sig-name descname"><span class="pre">sample_outcome</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">probs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rng</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">RandomState</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tlo.util.sample_outcome" title="Link to this definition"></a></dt>
<dd><p>Helper function to randomly sample an outcome for each individual in a population from a set of probabilities
that are specific to each individual.
:param probs: Each row of this dataframe represents the person and the columns are the possible outcomes. The
values are the probability of that outcome for that individual. For each individual, the probabilities of each
outcome are assumed to be independent and mutually exclusive (but not necessarily exhaustive). If they sum to more
than 1.0, then they are (silently) scaled so that they do sum to 1.0.
:param rng: Random Number state to use for the generation of random numbers.
:return: A dict of the form {&lt;index&gt;:&lt;outcome&gt;} where an outcome is selected.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tlo.util.BitsetHandler">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">BitsetHandler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">population</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="tlo.population.html#tlo.population.Population" title="tlo.population.Population"><span class="pre">Population</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">elements</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tlo.util.BitsetHandler" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Provides methods to operate on int column(s) in the population dataframe as a bitset</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>population</strong> – The TLO Population object (not the props dataframe).</p></li>
<li><p><strong>column</strong> – The integer property column that will be used as a bitset. If
set to <code class="docutils literal notranslate"><span class="pre">None</span></code> then the optional <cite>columns</cite> argument to methods which act
on the population dataframe __must__ be specified.</p></li>
<li><p><strong>elements</strong> – A list of strings specifying the elements of the bitset.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Instance of BitsetHandler for supplied arguments.</p>
</dd>
</dl>
<dl class="py property">
<dt class="sig sig-object py" id="tlo.util.BitsetHandler.df">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">df</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">DataFrame</span></em><a class="headerlink" href="#tlo.util.BitsetHandler.df" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tlo.util.BitsetHandler.element_repr">
<span class="sig-name descname"><span class="pre">element_repr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">elements</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">uint32</span></span></span><a class="headerlink" href="#tlo.util.BitsetHandler.element_repr" title="Link to this definition"></a></dt>
<dd><p>Returns integer representation of the specified element(s)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tlo.util.BitsetHandler.to_strings">
<span class="sig-name descname"><span class="pre">to_strings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">integer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">uint32</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#tlo.util.BitsetHandler.to_strings" title="Link to this definition"></a></dt>
<dd><p>Given an integer value, returns the corresponding set of strings.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>integer</strong> – The integer value for the bitset.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Set of strings corresponding to integer value.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tlo.util.BitsetHandler.set">
<span class="sig-name descname"><span class="pre">set</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">where</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">elements</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tlo.util.BitsetHandler.set" title="Link to this definition"></a></dt>
<dd><p>Set (i.e. set to True) the bits corersponding to the specified elements.</p>
<p>The where argument is used verbatim as the first item in a <cite>df.loc[x, y]</cite> call.
It can be index  items, a boolean logical condition, or list of row indices e.g. “[0]”.</p>
<p>The elements are one of more valid items from the list of elements for this bitset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>where</strong> – Condition to filter rows that will be set.</p></li>
<li><p><strong>elements</strong> – One or more elements to set to True.</p></li>
<li><p><strong>columns</strong> – Optional argument specifying column(s) containing bitsets to
update. If set to <code class="docutils literal notranslate"><span class="pre">None</span></code> (the default) a <code class="docutils literal notranslate"><span class="pre">column</span></code> argument must have
been specified when constructing the <code class="docutils literal notranslate"><span class="pre">BitsetHandler</span></code> object.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tlo.util.BitsetHandler.unset">
<span class="sig-name descname"><span class="pre">unset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">where</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">elements</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tlo.util.BitsetHandler.unset" title="Link to this definition"></a></dt>
<dd><p>Unset (i.e. set to False) the bits corresponding the specified elements.</p>
<p>The where argument is used verbatim as the first item in a <cite>df.loc[x, y]</cite> call.
It can be index items, a boolean logical condition, or list of row indices e.g. “[0]”.</p>
<p>The elements are one of more valid items from the list of elements for this bitset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>where</strong> – Condition to filter rows that will be unset.</p></li>
<li><p><strong>elements</strong> – one or more elements to set to False.</p></li>
<li><p><strong>columns</strong> – Optional argument specifying column(s) containing bitsets to
update. If set to <code class="docutils literal notranslate"><span class="pre">None</span></code> (the default) a <code class="docutils literal notranslate"><span class="pre">column</span></code> argument must have
been specified when constructing the <code class="docutils literal notranslate"><span class="pre">BitsetHandler</span></code> object.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tlo.util.BitsetHandler.clear">
<span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">where</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tlo.util.BitsetHandler.clear" title="Link to this definition"></a></dt>
<dd><p>Clears all the bits for the specified rows.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>where</strong> – Condition to filter rows that will cleared.</p></li>
<li><p><strong>columns</strong> – Optional argument specifying column(s) containing bitsets to
clear. If set to <code class="docutils literal notranslate"><span class="pre">None</span></code> (the default) a <code class="docutils literal notranslate"><span class="pre">column</span></code> argument must have
been specified when constructing the <code class="docutils literal notranslate"><span class="pre">BitsetHandler</span></code> object.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tlo.util.BitsetHandler.has">
<span class="sig-name descname"><span class="pre">has</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">where</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">element</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">first</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">DataFrame</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Series</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span></span></span><a class="headerlink" href="#tlo.util.BitsetHandler.has" title="Link to this definition"></a></dt>
<dd><p>Test whether bit(s) for a specified element are set.</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">param where<span class="colon">:</span></dt>
<dd class="field-odd"><p>Condition to filter rows that will checked.</p>
</dd>
</dl>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>element</strong> – <p>Element string to test if bit is set for.
:param first: Boolean keyword argument specifying whether to return only the</p>
<blockquote>
<div><p>first item / row in the computed column / dataframe.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">param columns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Optional argument specifying column(s) containing bitsets to
update. If set to <code class="docutils literal notranslate"><span class="pre">None</span></code> (the default) a <code class="docutils literal notranslate"><span class="pre">column</span></code> argument must have
been specified when constructing the <code class="docutils literal notranslate"><span class="pre">BitsetHandler</span></code> object.</p>
</dd>
<dt class="field-even">return<span class="colon">:</span></dt>
<dd class="field-even"><p>Boolean value(s) indicating whether element bit(s) are set.</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tlo.util.BitsetHandler.has_all">
<span class="sig-name descname"><span class="pre">has_all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">where</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">elements</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">first</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">DataFrame</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Series</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span></span></span><a class="headerlink" href="#tlo.util.BitsetHandler.has_all" title="Link to this definition"></a></dt>
<dd><p>Check whether individual(s) have all the elements given set to True.</p>
<p>The where argument is used verbatim as the first item in a <cite>df.loc[x, y]</cite> call.
It can be index  items, a boolean logical condition, or list of row indices e.g. “[0]”</p>
<p>The elements are one of more valid items from the list of elements for this bitset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>where</strong> – Condition to filter rows that will checked.</p></li>
<li><p><strong>elements</strong> – One or more elements to set to True.</p></li>
<li><p><strong>first</strong> – Boolean keyword argument specifying whether to return only the
first item / row in the computed column / dataframe.</p></li>
<li><p><strong>columns</strong> – Optional argument specifying column(s) containing bitsets to
update. If set to <code class="docutils literal notranslate"><span class="pre">None</span></code> (the default) a <code class="docutils literal notranslate"><span class="pre">column</span></code> argument must have
been specified when constructing the <code class="docutils literal notranslate"><span class="pre">BitsetHandler</span></code> object.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Boolean value(s) indicating whether all element bit(s) are set.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tlo.util.BitsetHandler.has_any">
<span class="sig-name descname"><span class="pre">has_any</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">where</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">elements</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">first</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">DataFrame</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Series</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span></span></span><a class="headerlink" href="#tlo.util.BitsetHandler.has_any" title="Link to this definition"></a></dt>
<dd><p>Check whether individual(s) have any of the elements given set to True.</p>
<p>The where argument is used verbatim as the first item in a <cite>df.loc[x, y]</cite> call.
It can be index items, a boolean logical condition, or list of row indices e.g. “[0]”</p>
<p>The elements are one of more valid items from the list of elements for this bitset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>where</strong> – Condition to filter rows that will checked.</p></li>
<li><p><strong>elements</strong> – One or more elements to set to True.</p></li>
<li><p><strong>first</strong> – Boolean keyword argument specifying whether to return only the
first item / row in the computed column / dataframe.</p></li>
<li><p><strong>columns</strong> – Optional argument specifying column(s) containing bitsets to
update. If set to <code class="docutils literal notranslate"><span class="pre">None</span></code> (the default) a <code class="docutils literal notranslate"><span class="pre">column</span></code> argument must have
been specified when constructing the <code class="docutils literal notranslate"><span class="pre">BitsetHandler</span></code> object.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Boolean value(s) indicating whether any element bit(s) are set.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tlo.util.BitsetHandler.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">where</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">first</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">DataFrame</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Series</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#tlo.util.BitsetHandler.get" title="Link to this definition"></a></dt>
<dd><p>Returns a series or dataframe with set of string elements where bit is True.</p>
<p>The where argument is used verbatim as the first item in a <cite>df.loc[x, y]</cite> call.
It can be index items, a boolean logical condition, or list of row indices e.g. “[0]”</p>
<p>The elements are one of more valid items from the list of elements for this bitset</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>where</strong> – Condition to filter rows that will returned.</p></li>
<li><p><strong>first</strong> – Boolean keyword argument specifying whether to return only the
first item / row in the computed column / dataframe.</p></li>
<li><p><strong>columns</strong> – Optional argument specifying column(s) containing bitsets to
update. If set to <code class="docutils literal notranslate"><span class="pre">None</span></code> (the default) a <code class="docutils literal notranslate"><span class="pre">column</span></code> argument must have
been specified when constructing the <code class="docutils literal notranslate"><span class="pre">BitsetHandler</span></code> object.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Set(s) of strings corresponding to elements with bits set to True.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tlo.util.BitsetHandler.uncompress">
<span class="sig-name descname"><span class="pre">uncompress</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">where</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">DataFrame</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">DataFrame</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#tlo.util.BitsetHandler.uncompress" title="Link to this definition"></a></dt>
<dd><p>Returns an exploded representation of the bitset(s).</p>
<p>Each element bit becomes a column and each column is a bool indicating whether
the bit is set for the element.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>where</strong> – Condition to filter rows that an exploded representation will be
returned for.</p></li>
<li><p><strong>columns</strong> – Optional argument specifying column(s) containing bitsets to
return exploded representation for. If set to <code class="docutils literal notranslate"><span class="pre">None</span></code> (the default) a
<code class="docutils literal notranslate"><span class="pre">column</span></code> argument must have been specified when constructing the
<code class="docutils literal notranslate"><span class="pre">BitsetHandler</span></code> object.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>If <code class="docutils literal notranslate"><span class="pre">columns</span></code> is not set or is set to a single string, then a
dataframe is returned with a column for each element in set and boolean
values indicating whether the corresponding bit is set; if <code class="docutils literal notranslate"><span class="pre">columns</span></code> is
specified as a list of multiple column names a dictionary keyed by column
name and with the corresponding value a dataframe corresponding to the
exploded representation of the column bitset is returned.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tlo.util.BitsetHandler.not_empty">
<span class="sig-name descname"><span class="pre">not_empty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">where</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">first</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">DataFrame</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Series</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span></span></span><a class="headerlink" href="#tlo.util.BitsetHandler.not_empty" title="Link to this definition"></a></dt>
<dd><p>Returns Series of bool indicating whether the BitSet entry is not empty.</p>
<p>True is set is not empty, False otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>where</strong> – Condition to filter rows that will checked.</p></li>
<li><p><strong>first</strong> – Boolean keyword argument specifying whether to return only the
first item / row in the computed column / dataframe.</p></li>
<li><p><strong>columns</strong> – Optional argument specifying column(s) containing bitsets to
update. If set to <code class="docutils literal notranslate"><span class="pre">None</span></code> (the default) a <code class="docutils literal notranslate"><span class="pre">column</span></code> argument must have
been specified when constructing the <code class="docutils literal notranslate"><span class="pre">BitsetHandler</span></code> object.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Boolean value(s) indicating whether any elements bits are set.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tlo.util.BitsetHandler.is_empty">
<span class="sig-name descname"><span class="pre">is_empty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">where</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">first</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">DataFrame</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Series</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span></span></span><a class="headerlink" href="#tlo.util.BitsetHandler.is_empty" title="Link to this definition"></a></dt>
<dd><p>Returns Series of bool indicating whether the BitSet entry is empty.</p>
<p>True if the set is empty, False otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>where</strong> – Condition to filter rows that will checked.</p></li>
<li><p><strong>first</strong> – Boolean keyword argument specifying whether to return only the
first item / row in the computed column / dataframe.</p></li>
<li><p><strong>columns</strong> – Optional argument specifying column(s) containing bitsets to
update. If set to <code class="docutils literal notranslate"><span class="pre">None</span></code> (the default) a <code class="docutils literal notranslate"><span class="pre">column</span></code> argument must have
been specified when constructing the <code class="docutils literal notranslate"><span class="pre">BitsetHandler</span></code> object.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Boolean value(s) indicating whether all elements bits are not set.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tlo.util.random_date">
<span class="sig-name descname"><span class="pre">random_date</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rng</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tlo.util.random_date" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tlo.util.str_to_pandas_date">
<span class="sig-name descname"><span class="pre">str_to_pandas_date</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date_string</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tlo.util.str_to_pandas_date" title="Link to this definition"></a></dt>
<dd><p>Convert a string with the format YYYY-MM-DD to a pandas Timestamp (aka TLO Date) object.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tlo.util.hash_dataframe">
<span class="sig-name descname"><span class="pre">hash_dataframe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataframe</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DataFrame</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tlo.util.hash_dataframe" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tlo.util.get_person_id_to_inherit_from">
<span class="sig-name descname"><span class="pre">get_person_id_to_inherit_from</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">child_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mother_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">population_dataframe</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rng</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tlo.util.get_person_id_to_inherit_from" title="Link to this definition"></a></dt>
<dd><p>Get index of person to inherit properties from.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tlo.util.convert_excel_files_to_csv">
<span class="sig-name descname"><span class="pre">convert_excel_files_to_csv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">folder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">files</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">delete_excel_files</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#tlo.util.convert_excel_files_to_csv" title="Link to this definition"></a></dt>
<dd><p>convert Excel files to csv files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>folder</strong> – Folder containing Excel files.</p></li>
<li><p><strong>files</strong> – List of Excel file names to convert to csv files. When <cite>None</cite>, all Excel files in the folder and
subsequent folders within this folder will be converted to csv files with Excel file name becoming
folder name and sheet names becoming csv file names.</p></li>
<li><p><strong>delete_excel_files</strong> – When true, the Excel file we are generating csv files from will get deleted.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tlo.util.read_csv_files">
<span class="sig-name descname"><span class="pre">read_csv_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">folder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ExtensionDtype</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">dtype</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">complex</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">object</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">Hashable</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ExtensionDtype</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">dtype</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">complex</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">object</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ExtensionDtype</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">dtype</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">complex</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">object</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">Hashable</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ExtensionDtype</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">dtype</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">complex</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">object</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">files</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">DataFrame</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">DataFrame</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#tlo.util.read_csv_files" title="Link to this definition"></a></dt>
<dd><p>A function to read CSV files in a similar way pandas reads Excel files (<code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.read_excel()</span></code>).</p>
<p>NB: Converting Excel files to csv files caused all columns that had no relevant data to simulation (i.e.
parameter descriptions or data references) to be named <cite>Unnamed1, Unnamed2, ….., UnnamedN</cite> in the csv files.
We are therefore using <code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.filter()</span></code> to track all unnamed columns and silently drop them using
<code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.drop()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>folder</strong> – Path to folder containing CSV files to read.</p></li>
<li><p><strong>dtype</strong> – allows passing in a dictionary of datatypes in cases where you want different datatypes per column</p></li>
<li><p><strong>files</strong> – <p>preferred csv file name(s). This is the same as sheet names in Excel file. Note that if None(no files
selected) then all csv files in the containing folder will be read</p>
<blockquote>
<div><ul>
<li><p>if files argument is initialised to zero(default) and the folder contains one or multiple files,
this method will return a dataframe. If the folder contain multiple files, it is good to
specify file names or initialise files argument with None to ensure correct files are selected</p></li>
<li><p>if files argument is initialised to None and the folder contains one or multiple files, this method
will return a dataframe dictionary</p></li>
<li><p>if the folder contains multiple files and files argument is initialised with one file name this
method will return a dataframe. it will return a dataframe dictionary when files argument is
initialised with a list of multiple file names</p></li>
</ul>
</div></blockquote>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tlo.util.parse_csv_values_for_columns_with_mixed_datatypes">
<span class="sig-name descname"><span class="pre">parse_csv_values_for_columns_with_mixed_datatypes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tlo.util.parse_csv_values_for_columns_with_mixed_datatypes" title="Link to this definition"></a></dt>
<dd><p>Pandas <code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.read_csv()</span></code> function handles columns with mixed data types by defaulting to the object
data type, which often results in values being interpreted as strings. The most common place for this in TLO is
when we are reading parameters. This is not a problem when the parameters are read in read parameters method
using load_parameters_from_dataframe method as parameter values are mapped to their defined datatypes.</p>
<p>Problems arise when you’re trying to directly use the output from the csv files like it is within some few files
in TLO. This method tries to provide a fix by parsing the parameter values in those few places to their best
possible data types</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>value</strong> – mixed datatype column value</p>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="tlo.simulation.html" class="btn btn-neutral float-left" title="tlo.simulation module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="tlo.methods.cervical_cancer.html" class="btn btn-neutral float-right" title="tlo.methods.cervical_cancer module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>