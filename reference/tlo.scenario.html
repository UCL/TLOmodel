<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>tlo.scenario module &mdash; TLOmodel 0.1.dev2392+g4a55807 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d10597a4" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/theme_overrides.css?v=6ea10ece" />

  
    <link rel="shortcut icon" href="../_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=2acae80b"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="tlo.simulation module" href="tlo.simulation.html" />
    <link rel="prev" title="tlo.progressbar module" href="tlo.progressbar.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            TLOmodel
          </a>
              <div class="version">
                0.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Welcome</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aims.html">Aims &amp; Objectives</a></li>
<li class="toctree-l1"><a class="reference internal" href="../writeups.html">Model Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data_sources.html">Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../azure_batch.html">Using Azure Batch</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resources/index.html">Resource files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../learning.html">Learning Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../publications.html">Publications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributors.html">Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">TLOmodel</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Reference</a></li>
          <li class="breadcrumb-item"><a href="tlo.html">tlo package</a></li>
      <li class="breadcrumb-item active">tlo.scenario module</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/reference/tlo.scenario.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-tlo.scenario">
<span id="tlo-scenario-module"></span><h1>tlo.scenario module<a class="headerlink" href="#module-tlo.scenario" title="Link to this heading"></a></h1>
<p>Creating and running simulation scenarios for TLOmodel.</p>
<p>Scenarios are used to specify, configure and run a single or set of TLOmodel
simulations. A scenario is created by subclassing <code class="docutils literal notranslate"><span class="pre">BaseScenario</span></code> and specifying the
scenario options therein. You can override parameters of the simulation modules in
various ways in the scenario. See the <code class="docutils literal notranslate"><span class="pre">BaseScenario</span></code> class for more information.</p>
<p>The subclass of <code class="docutils literal notranslate"><span class="pre">BaseScenario</span></code> is then used to create <em>draws</em>, which can be considered
a fully-specified configuration of the scenario, or a parameter draw.</p>
<p>Each draw is <em>run</em> one or more times - run is a single execution of the simulation. Each
run of a draw has a different seed but is otherwise identical. Each run has its own
simulation seed, introducing randomness into each simulation. A collection of runs for a
given draw describes the random variation in the simulation.</p>
<p>A simple example of a subclass of <code class="docutils literal notranslate"><span class="pre">BaseScenario</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyTestScenario</span><span class="p">(</span><span class="n">BaseScenario</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">seed</span> <span class="o">=</span> <span class="mi">12</span><span class="p">,</span>
            <span class="n">start_date</span> <span class="o">=</span> <span class="n">Date</span><span class="p">(</span><span class="mi">2010</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
            <span class="n">end_date</span> <span class="o">=</span> <span class="n">Date</span><span class="p">(</span><span class="mi">2011</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
            <span class="n">initial_population_size</span> <span class="o">=</span> <span class="mi">200</span><span class="p">,</span>
            <span class="n">number_of_draws</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
            <span class="n">runs_per_draw</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">log_configuration</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;filename&#39;</span><span class="p">:</span> <span class="s1">&#39;my_test_scenario&#39;</span><span class="p">,</span>
            <span class="s1">&#39;directory&#39;</span><span class="p">:</span> <span class="s1">&#39;./outputs&#39;</span><span class="p">,</span>
            <span class="s1">&#39;custom_levels&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;*&#39;</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">}</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">modules</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="n">demography</span><span class="o">.</span><span class="n">Demography</span><span class="p">(</span><span class="n">resourcefilepath</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">resources</span><span class="p">),</span>
            <span class="n">enhanced_lifestyle</span><span class="o">.</span><span class="n">Lifestyle</span><span class="p">(</span><span class="n">resourcefilepath</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">resources</span><span class="p">),</span>
        <span class="p">]</span>

    <span class="k">def</span> <span class="nf">draw_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">draw_number</span><span class="p">,</span> <span class="n">rng</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;Lifestyle&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;init_p_urban&#39;</span><span class="p">:</span> <span class="n">rng</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span> <span class="o">/</span> <span class="mf">100.0</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">}</span>
</pre></div>
</div>
<p>In summary:</p>
<ul class="simple">
<li><p>A <em>scenario</em> specifies the configuration of the simulation. The simulation start and
end dates, initial population size, logging setup and registered modules. Optionally,
you can also override parameters of modules.</p></li>
<li><p>A <em>draw</em> is a realisation of a scenario configuration. A scenario can have one or more
draws. Draws are uninteresting unless you are overriding parameters. If you do not
override any model parameters, you would only have one draw.</p></li>
<li><p>A <em>run</em> is the result of running the simulation using a specific configuration. Each
draw would run one or more times. Each run for the same draw will have an identical
configuration except the simulation seed.</p></li>
</ul>
<dl class="py class">
<dt class="sig sig-object py" id="tlo.scenario.BaseScenario">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">BaseScenario</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_date</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Timestamp</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_date</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Timestamp</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initial_population_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">number_of_draws</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">runs_per_draw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resources_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">PosixPath('resources')</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tlo/scenario.html#BaseScenario"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tlo.scenario.BaseScenario" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></p>
<p>An abstract base class for creating scenarios.</p>
<p>A scenario is a configuration of a simulation. Users should subclass this class and
must implement the following methods:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">__init__</span></code> - to set scenario attributes,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">log_configuration</span></code> - to configure filename, directory and logging levels for
simulation output,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">modules</span></code> - to list disease, intervention and health system modules for the
simulation.</p></li>
</ul>
<p>Users may also optionally implement:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">draw_parameters</span></code> - override parameters for draws from the scenario.</p></li>
</ul>
<dl class="py method">
<dt class="sig sig-object py" id="tlo.scenario.BaseScenario.log_configuration">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">log_configuration</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tlo/scenario.html#BaseScenario.log_configuration"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tlo.scenario.BaseScenario.log_configuration" title="Link to this definition"></a></dt>
<dd><p>Implementation must return a dictionary configuring logging.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="p">{</span>
    <span class="s1">&#39;filename&#39;</span><span class="p">:</span> <span class="s1">&#39;test_scenario&#39;</span><span class="p">,</span>
    <span class="s1">&#39;directory&#39;</span><span class="p">:</span> <span class="s1">&#39;./outputs&#39;</span><span class="p">,</span>
    <span class="s1">&#39;custom_levels&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;*&#39;</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">,</span>
        <span class="s1">&#39;tlo.methods.demography&#39;</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">INFO</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tlo.scenario.BaseScenario.modules">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">modules</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tlo/scenario.html#BaseScenario.modules"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tlo.scenario.BaseScenario.modules" title="Link to this definition"></a></dt>
<dd><p>Implementation must return a list of instances of TLOmodel modules to
register in the simulation.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="p">[</span>
    <span class="n">demography</span><span class="o">.</span><span class="n">Demography</span><span class="p">(</span><span class="n">resourcefilepath</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">resources</span><span class="p">),</span>
    <span class="n">enhanced_lifestyle</span><span class="o">.</span><span class="n">Lifestyle</span><span class="p">(</span><span class="n">resourcefilepath</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">resources</span><span class="p">),</span>
    <span class="n">healthsystem</span><span class="o">.</span><span class="n">HealthSystem</span><span class="p">(</span>
        <span class="n">resourcefilepath</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">resources</span><span class="p">,</span>
        <span class="n">disable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">d</span>
        <span class="n">service_availability</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">]</span>
    <span class="p">),</span>
    <span class="o">...</span>
<span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tlo.scenario.BaseScenario.draw_parameters">
<span class="sig-name descname"><span class="pre">draw_parameters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">draw_number</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rng</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tlo/scenario.html#BaseScenario.draw_parameters"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tlo.scenario.BaseScenario.draw_parameters" title="Link to this definition"></a></dt>
<dd><p>Implementation must return a dictionary of parameters to override for each draw.</p>
<p>The overridden parameters must be scalar (i.e. float, integer or string) as the following examples demonstrate.
The argument <code class="docutils literal notranslate"><span class="pre">draw_number</span></code> and a random number generator are available, if required.</p>
<ul class="simple">
<li><p>Change a parameter to a fixed value: <code class="docutils literal notranslate"><span class="pre">{'Labour':</span> <span class="pre">{'average_age_at_pregnancy':</span> <span class="pre">25}}</span></code></p></li>
<li><p>Sample a value from a distribution: <code class="docutils literal notranslate"><span class="pre">{'Lifestyle':</span> <span class="pre">{'init_p_urban':</span> <span class="pre">rng.randint(10,</span> <span class="pre">20)</span> <span class="pre">/</span> <span class="pre">100.0}}</span></code></p></li>
<li><p>Set a value based on the draw number: <code class="docutils literal notranslate"><span class="pre">{'Labour':</span> <span class="pre">{'average_age_at_pregnancy':</span> <span class="pre">[25,</span> <span class="pre">30,</span> <span class="pre">35][draw_number]}}</span></code></p></li>
</ul>
<p>Implementation of this method in a subclass is optional. If no parameters are to be overridden,
returns <code class="docutils literal notranslate"><span class="pre">None</span></code>. If no parameters are overridden, only one draw of the scenario is required.</p>
<p>A full example for a scenario with 10 draws:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="p">{</span>
    <span class="s1">&#39;Lifestyle&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;init_p_urban&#39;</span><span class="p">:</span> <span class="n">rng</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span> <span class="o">/</span> <span class="mf">100.0</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s1">&#39;Labour&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;average_age_at_pregnancy&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">10</span> <span class="o">*</span> <span class="n">rng</span><span class="o">.</span><span class="n">exponential</span><span class="p">(</span><span class="mf">0.1</span><span class="p">),</span>
        <span class="s1">&#39;some_other_parameter&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)[</span><span class="n">draw_number</span><span class="p">]</span>
    <span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>draw_number</strong> (<em>int</em>) – the specific draw number currently being executed by the simulation engine</p></li>
<li><p><strong>rng</strong> (<em>numpy.random.RandomState</em>) – the scenario’s random number generator for sampling from distributions</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tlo.scenario.BaseScenario.get_log_config">
<span class="sig-name descname"><span class="pre">get_log_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">override_output_directory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tlo/scenario.html#BaseScenario.get_log_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tlo.scenario.BaseScenario.get_log_config" title="Link to this definition"></a></dt>
<dd><p>Returns the log configuration for the scenario, with some post_processing.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tlo.scenario.BaseScenario.save_draws">
<span class="sig-name descname"><span class="pre">save_draws</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">return_config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tlo/scenario.html#BaseScenario.save_draws"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tlo.scenario.BaseScenario.save_draws" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tlo.scenario.ScenarioLoader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ScenarioLoader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scenario_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tlo/scenario.html#ScenarioLoader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tlo.scenario.ScenarioLoader" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A utility class to load a scenario class from a file path</p>
<dl class="py method">
<dt class="sig sig-object py" id="tlo.scenario.ScenarioLoader.get_scenario">
<span class="sig-name descname"><span class="pre">get_scenario</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tlo/scenario.html#ScenarioLoader.get_scenario"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tlo.scenario.ScenarioLoader.get_scenario" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tlo.scenario.DrawGenerator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DrawGenerator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scenario_class</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">number_of_draws</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">runs_per_draw</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tlo/scenario.html#DrawGenerator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tlo.scenario.DrawGenerator" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Creates and saves a JSON representation of draws from a scenario.</p>
<dl class="py method">
<dt class="sig sig-object py" id="tlo.scenario.DrawGenerator.setup_draws">
<span class="sig-name descname"><span class="pre">setup_draws</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tlo/scenario.html#DrawGenerator.setup_draws"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tlo.scenario.DrawGenerator.setup_draws" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tlo.scenario.DrawGenerator.get_draw">
<span class="sig-name descname"><span class="pre">get_draw</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">draw_number</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tlo/scenario.html#DrawGenerator.get_draw"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tlo.scenario.DrawGenerator.get_draw" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tlo.scenario.DrawGenerator.get_run_config">
<span class="sig-name descname"><span class="pre">get_run_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scenario_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tlo/scenario.html#DrawGenerator.get_run_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tlo.scenario.DrawGenerator.get_run_config" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tlo.scenario.DrawGenerator.save_config">
<span class="sig-name descname"><span class="pre">save_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tlo/scenario.html#DrawGenerator.save_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tlo.scenario.DrawGenerator.save_config" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tlo.scenario.SampleRunner">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">SampleRunner</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">run_configuration_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tlo/scenario.html#SampleRunner"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tlo.scenario.SampleRunner" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Reads scenario draws from a JSON configuration and handles running of samples</p>
<dl class="py property">
<dt class="sig sig-object py" id="tlo.scenario.SampleRunner.number_of_draws">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">number_of_draws</span></span><a class="headerlink" href="#tlo.scenario.SampleRunner.number_of_draws" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tlo.scenario.SampleRunner.runs_per_draw">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">runs_per_draw</span></span><a class="headerlink" href="#tlo.scenario.SampleRunner.runs_per_draw" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tlo.scenario.SampleRunner.get_draw">
<span class="sig-name descname"><span class="pre">get_draw</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">draw_number</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tlo/scenario.html#SampleRunner.get_draw"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tlo.scenario.SampleRunner.get_draw" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tlo.scenario.SampleRunner.get_samples_for_draw">
<span class="sig-name descname"><span class="pre">get_samples_for_draw</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">draw</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tlo/scenario.html#SampleRunner.get_samples_for_draw"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tlo.scenario.SampleRunner.get_samples_for_draw" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tlo.scenario.SampleRunner.get_sample">
<span class="sig-name descname"><span class="pre">get_sample</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">draw</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample_number</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tlo/scenario.html#SampleRunner.get_sample"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tlo.scenario.SampleRunner.get_sample" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tlo.scenario.SampleRunner.run_sample_by_number">
<span class="sig-name descname"><span class="pre">run_sample_by_number</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_directory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">draw_number</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample_number</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tlo/scenario.html#SampleRunner.run_sample_by_number"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tlo.scenario.SampleRunner.run_sample_by_number" title="Link to this definition"></a></dt>
<dd><p>Runs a single sample from a draw, saving the output to the given directory</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tlo.scenario.SampleRunner.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tlo/scenario.html#SampleRunner.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tlo.scenario.SampleRunner.run" title="Link to this definition"></a></dt>
<dd><p>Run all samples for the scenario. Used by <cite>tlo scenario-run</cite> to run the scenario locally</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tlo.scenario.SampleRunner.override_parameters">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">override_parameters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overridden_params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tlo/scenario.html#SampleRunner.override_parameters"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tlo.scenario.SampleRunner.override_parameters" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tlo.scenario.SampleRunner.low_bias_32">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">low_bias_32</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tlo/scenario.html#SampleRunner.low_bias_32"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tlo.scenario.SampleRunner.low_bias_32" title="Link to this definition"></a></dt>
<dd><p>A simple integer hash function with uniform distribution. Following description taken from
<a class="reference external" href="https://github.com/skeeto/hash-prospector">https://github.com/skeeto/hash-prospector</a></p>
<blockquote>
<div><p>The integer hash function transforms an integer hash key into an integer hash result. For a hash function,
the distribution should be uniform. This implies when the hash result is used to calculate hash bucket
address, all buckets are equally likely to be picked. In addition, similar hash keys should be hashed to
very different hash results. Ideally, a single bit change in the hash key should influence all bits of the
hash result.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Param<span class="colon">:</span></dt>
<dd class="field-odd"><p>x an integer</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>an integer</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tlo.scenario.make_cartesian_parameter_grid">
<span class="sig-name descname"><span class="pre">make_cartesian_parameter_grid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">module_parameter_values_dict</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/tlo/scenario.html#make_cartesian_parameter_grid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tlo.scenario.make_cartesian_parameter_grid" title="Link to this definition"></a></dt>
<dd><p>Make a list of dictionaries corresponding to a grid across parameter space.</p>
<p>The parameters values in each parameter dictionary corresponds to an element in the
Cartesian product of iterables describing the values taken by a collection of
module specific parameters.</p>
<p>Intended for use in <code class="docutils literal notranslate"><span class="pre">BaseScenario.draw_parameters</span></code> to determine the set of
parameters for a scenario draw.</p>
<p>Example usage (in <code class="docutils literal notranslate"><span class="pre">BaseScenario.draw_parameters</span></code>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="n">make_cartesian_parameter_grid</span><span class="p">(</span>
    <span class="p">{</span>
        <span class="s2">&quot;Mockitis&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;numeric_parameter&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
            <span class="s2">&quot;categorical_parameter&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;category_a&quot;</span><span class="p">,</span> <span class="s2">&quot;category_b&quot;</span><span class="p">]</span>
        <span class="p">},</span>
        <span class="s2">&quot;HealthSystem&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;cons_availability&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="s2">&quot;all&quot;</span><span class="p">]</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">)[</span><span class="n">draw_number</span><span class="p">]</span>
</pre></div>
</div>
<p>In practice it will be more performant to call <code class="docutils literal notranslate"><span class="pre">make_cartesian_parameter_grid</span></code>
once in the scenario <code class="docutils literal notranslate"><span class="pre">__init__</span></code> method, store this as an attribute of the scenario
and reuse this in each call to <code class="docutils literal notranslate"><span class="pre">draw_parameters</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>module_parameter_values_dict</strong> (<em>dict</em>) – A dictionary mapping from module names
(as strings) to dictionaries mapping from (string) parameter names associated
with the model to iterables of the values over which parameter should take in
the grid.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of dictionaries mapping from module names (as strings) to
dictionaries mapping from (string) parameter names associated with the model to
parameter values, with each dictionary in the list corresponding to a single
point in the Cartesian grid across the parameter space.</p>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="tlo.progressbar.html" class="btn btn-neutral float-left" title="tlo.progressbar module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="tlo.simulation.html" class="btn btn-neutral float-right" title="tlo.simulation module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
      <span class="lastupdated">Last updated on Apr 23, 2024.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>