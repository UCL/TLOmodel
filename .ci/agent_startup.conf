[Unit]
Description           = TLO GHA Agent ${AGENT_IDX}
StartLimitIntervalSec = 0
StartLimitBurst       = 0

[Service]
Environment           = PATH=${AGENT_PATH}
WorkingDirectory      = ${AGENT_DIR}
# Agents would never resume receiving jobs after an auto-update when running
# with `./run.sh`, see
# * https://github.com/actions/runner/issues/246
# * https://github.com/actions/runner/issues/485
# The workaround is to use `runsvc.sh` as entry point.
ExecStart             = ${AGENT_DIR}/runsvc.sh

# Always restart, don't limit restarts at all, restart once per second
Restart               = always
RestartSec            = 1

[Install]
WantedBy              = default.target
